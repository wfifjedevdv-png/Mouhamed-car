<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</title>

<style>
:root{
 --bg1:#05070c;
 --bg2:#0b0f17;
 --blue:#1e90ff;
 --glass:rgba(255,255,255,.1);
 --border:rgba(255,255,255,.2);
}

*{box-sizing:border-box;font-family:Segoe UI,Tahoma}

body{
 margin:0;
 min-height:100vh;
 background:linear-gradient(180deg,var(--bg1),var(--bg2));
 color:white;
}

/* ===== HEADER Ù…Ø«Ù„ SHEIN ===== */
.header{
 position:fixed;
 top:0;
 right:0;
 left:0;
 height:56px;
 background:#020617;
 display:flex;
 align-items:center;
 justify-content:space-between;
 padding:0 16px;
 z-index:1000;
}

.header h3{margin:0;font-size:18px}

.cart-btn{
 position:relative;
 font-size:22px;
 cursor:pointer;
}

.cart-count{
 position:absolute;
 top:-6px;
 left:-6px;
 background:#ff4d4d;
 color:white;
 font-size:12px;
 padding:2px 6px;
 border-radius:999px;
}

/* ===== CART PANEL ===== */
.cart-panel{
 position:fixed;
 top:56px;
 right:10px;
 width:300px;
 max-height:400px;
 background:#0b0f17;
 border:1px solid rgba(255,255,255,.15);
 border-radius:18px;
 padding:12px;
 display:none;
 z-index:1000;
}

.cart-item{
 display:flex;
 gap:10px;
 margin-bottom:10px;
}

.cart-item img{
 width:60px;
 height:60px;
 object-fit:cover;
 border-radius:10px;
}

.cart-item .price{
 color:#3aa0ff;
 font-size:14px;
}

.container{
 max-width:900px;
 margin:auto;
 padding:80px 20px 20px;
}

.back{
 background:none;
 border:none;
 color:var(--blue);
 cursor:pointer;
 font-size:16px;
 margin-bottom:14px;
}

.card{
 background:var(--glass);
 backdrop-filter:blur(14px);
 border-radius:26px;
 padding:18px;
 border:1px solid var(--border);
}

.card img{
 width:100%;
 height:360px;
 object-fit:cover;
 border-radius:22px;
}

.price{
 color:var(--blue);
 font-size:22px;
 font-weight:bold;
 margin-bottom:10px;
}

button.send{
 width:100%;
 margin-top:12px;
 padding:12px;
 border-radius:14px;
 border:none;
 background:linear-gradient(135deg,#1e90ff,#3aa0ff);
 color:white;
 font-weight:600;
 cursor:pointer;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
 <h3>ğŸš— Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h3>
 <div class="cart-btn" onclick="toggleCart()">
  ğŸ›’
  <span class="cart-count" id="cartCount">0</span>
 </div>
</div>

<!-- CART PANEL -->
<div class="cart-panel" id="cartPanel">
 <h4 style="margin:0 0 10px">Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h4>
 <div id="cartList"></div>
</div>

<div class="container">
<button class="back" onclick="goBack()">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹</button>

<div class="card" id="card">
 <img id="img">
 <h2 id="name"></h2>
 <div class="price" id="price"></div>
 <p id="desc"></p>

 <button class="send" onclick="addToCart()">ğŸ›’ Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©</button>
</div>
</div>

<script>
if(!localStorage.getItem("session")) location.href="index.html";

const cars = JSON.parse(localStorage.getItem("cars")||"[]");
const i = localStorage.getItem("currentCar");
const car = cars[i];

img.src=car.img;
name.innerText=car.name;
price.innerText=car.price;
desc.innerText=car.desc;

function cartKey(){
 return "cart_"+JSON.parse(localStorage.getItem("session")).email;
}

function addToCart(){
 const key=cartKey();
 const cart=JSON.parse(localStorage.getItem(key)||"[]");
 cart.push(car);
 localStorage.setItem(key,JSON.stringify(cart));
 updateCart();
}

function toggleCart(){
 const p=document.getElementById("cartPanel");
 p.style.display=p.style.display==="block"?"none":"block";
 updateCart();
}

function updateCart(){
 const cart=JSON.parse(localStorage.getItem(cartKey())||"[]");
 cartCount.innerText=cart.length;
 cartList.innerHTML="";
 if(!cart.length){
  cartList.innerHTML="<p style='opacity:.6'>Ø§Ù„Ø¹Ø±Ø¨Ø© ÙØ§Ø±ØºØ©</p>";
  return;
 }
 cart.forEach(c=>{
  cartList.innerHTML+=`
   <div class="cart-item">
    <img src="${c.img}">
    <div>
     <div>${c.name}</div>
     <div class="price">${c.price}</div>
    </div>
   </div>`;
 });
}

updateCart();

function goBack(){
 location.href="gallery.html";
}
</script>

</body>
</html>
